% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/r_table.R
\name{r_table}
\alias{r_table}
\title{Create a Detailed Correlation Matrix}
\usage{
r_table(
  data,
  vars = NULL,
  with = NULL,
  type = "pearson",
  flag = TRUE,
  strict = FALSE,
  round = 2,
  use_for_hetcor = "pairwise.complete.obs"
)
}
\arguments{
\item{data}{A data.frame.}

\item{vars}{Optional. A character vector of variable names to be used as rows
in the correlation matrix. If NULL, all variables in \code{data} are used.}

\item{with}{Optional. A character vector of variable names to be used as columns
in the correlation matrix. If NULL and \code{vars} is also specified, a symmetric
matrix for \code{vars} is produced. If NULL and \code{vars} is also NULL, a symmetric
matrix for all variables in \code{data} is produced. If specified, an
asymmetric matrix is produced with \code{vars} as rows and \code{with} as columns.}

\item{type}{Character string specifying the type of correlation:
"pearson" (default), "spearman", or "mixed".
For "mixed", \code{polycor::hetcor} is used.}

\item{flag}{Logical. If TRUE (default), flag significant correlations.}

\item{strict}{Logical. If TRUE (default is FALSE), uses a stricter criterion for flags
(e.g., only '\emph{' for p < .01). If FALSE, uses '}' for p < .05, '**' for p < .01,
and "'" for p < .10.}

\item{round}{Integer. Number of decimal places for displayed correlations (default 2).}

\item{use_for_hetcor}{Passed to \code{polycor::hetcor}'s \code{use} argument when \code{type = "mixed"}.
Default is "pairwise.complete.obs". For \code{Hmisc::rcorr}, handling is internal.}
}
\value{
A list with the following components:
\item{formatted_table}{The formatted correlation matrix with flags and Ns on diagonal (if applicable).}
\item{r}{The raw correlation matrix.}
\item{p}{The raw p-value matrix.}
\item{n}{The matrix of sample sizes for each correlation.}
}
\description{
Calculates and formats a correlation matrix, allowing for various correlation types,
variable selection, and significance flagging.
}
\examples{
# Basic Pearson correlation
r_table(mtcars[, 1:5])

# Spearman with specific variables
r_table(mtcars, vars = c("mpg", "wt"), with = c("cyl", "hp"), type = "spearman")

# Mixed data types example
set.seed(123)
mixed_data <- data.frame(
  cont1 = rnorm(50),
  cont2 = rnorm(50),
  ord1 = factor(sample(1:3, 50, TRUE), ordered = TRUE),
  bin1 = factor(sample(0:1, 50, TRUE))
)
result_mixed <- r_table(mixed_data, type = "mixed", round = 3)
print(result_mixed$formatted_table)
print(result_mixed$r)

}
